version: "3.8"
services:

#  ollama:
#    image: ollama/ollama
#    ports:
#      - "11434:11434"
#    environment:
#      - OLLAMA_DEBUG=true
#    volumes:
#      - ollama:/root/.ollama

  rag_system:
    build:
      context: .
      dockerfile: Dockerfile
    env_file:
      - .env
    volumes:
      - ./data:/app/data
      - /etc/letsencrypt:/etc/letsencrypt:ro
    ports:
      - "443:443"
    command: >
      uvicorn app.main:app --host 0.0.0.0 --port 443
      --ssl-keyfile /etc/letsencrypt/live/rag-prototype.eastus2.cloudapp.azure.com/privkey.pem
      --ssl-certfile /etc/letsencrypt/live/rag-prototype.eastus2.cloudapp.azure.com/fullchain.pem


volumes:
  ollama:
